.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "BUILD_AMI" "1" "July 2014" "" ""
.
.SH "NAME"
\fBbuild_ami\fR \- build Turnkey Linux appliance and copy it to device
.
.SH "SYNOPSIS"
\fBbuild_ami\fR [\fIoptions\fR] \fB\-\-turnkey\-app=\fR\fIapp\fR \fB\-\-device=\fR\fIdevice\fR
.
.br
.
.SH "DESCRIPTION"
\fBbuild_ami\fR builds a Turnkey Linux appliance and copies it to a block device\.
.
.P
This command should be run from a Turnkey Linux development environment such as \fBtkldev\fR\. This command must be run as \fBroot\fR\.
.
.P
In its default mode, \fBbuild_ami\fR starts by building the appliance\. It then removes all objects generated during the build process\. This behavior can be modified with the \fB\-\-build\-only\fR and \fB\-\-clean\-only\fR options\.
.
.SH "OPTIONS"
Mandatory options:
.
.TP
\fB\-d\fR \fIdevice\fR, \fB\-\-device=\fR\fIdevice\fR
The block device onto which the appliance will be copied\.
.
.TP
\fB\-a\fR \fIapp\fR, \fB\-\-turnkey\-app=\fR\fIapp\fR
The name of the Turnkey Linux appliance to build\.
.
.P
Build process options:
.
.TP
\fB\-b\fR, \fB\-\-build\-only\fR
Build the appliance and copy it to the device but do not remove any files generated by the build process\.
.
.TP
\fB\-c\fR, \fB\-\-clean\-only\fR
Remove all files generated by a previous build\.
.
.P
Directory options:
.
.TP
\fB\-p\fR \fIdirectory\fR, \fB\-\-patch\-dir=\fR\fIdirectory\fR
The directory holding the patches used by tklpatch(1) to modify the appliance root filesystem\. The default is \fI/usr/local/share/tklpatch\fR\.
.
.TP
\fB\-f\fR \fIdirectory\fR, \fB\-\-fab\-dir=\fR\fIdirectory\fR
The Turnkey factory directory\. The default is \fI/turnkey/fab\fR\.
.
.TP
\fB\-m\fR \fIdirectory\fR, \fB\-\-mount\-point=\fR\fIdirectory\fR
The temporary mount point used to mount the block device\. The default is \fI/mnt\fR\.
.
.TP
\fB\-w\fR \fIdirectory\fR, \fB\-\-work\-dir=\fR\fIdirectory\fR
The directory used to extract the root filesystem and apply patches with tklpatch(1)\. The default is \fI/tmp\fR\.
.
.P
Miscellaneous options:
.
.TP
\fB\-g\fR \fIurl\fR, \fB\-\-turnkey\-apps\-git=\fR\fIurl\fR
The URL of the github account hosting each Turnkey Linux appliance\. The default is \fIhttps://github\.com/turnkeylinux\-apps\fR\.
.
.TP
\fB\-t\fR \fIpatch\fR, \fB\-\-turnkey\-apps\-git=\fR\fIpatch\fR
Add a patch to the list of patches applied by tklpatch(1)\. The patch must be copied to the patch directory beforehand, see the \fB\-\-patch\-dir\fR option\. The default patch list is: \fIheadless\fR, \fIoutscale\fR\.
.
.TP
\fB\-v\fR, \fB\-\-verbose\fR
Print messages to the console\. Use twice for more output\.
.
.SH "EXAMPLES"
Build the \fBtkldev\fR appliance, copy it to \fB/dev/sdb\fR and cleanup:
.
.IP "" 4
.
.nf

$ build_ami \-v \-\-build\-only \-\-turnkey\-app=tkldev \-\-device=/dev/sdb
\.\.\.
$ build_ami \-v \-\-clean\-only \-\-turnkey\-app=tkldev
\.\.\.
.
.fi
.
.IP "" 0
.
.SH "SEE ALSO"
tklpatch(1), build_ami_from_rootfs(1), create_ami(1)
